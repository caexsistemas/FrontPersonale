
<div class="card mt-6">
    <div *ngIf="view == 'create' || view == 'update'">
        <div class="card-header">
            <h5 class="modal-title">
                <p class="title-modal" *ngIf="view == 'create'">{{title}}</p>
                <p class="title-modal" *ngIf="view == 'update'">{{title}}</p>
                <button type="button" class="btn btn-primary btn-close" (click)="closeDialog()" aria-label="Close"
                    style="position: absolute;left: 90%;top: 2%;font-size: 12px;">
                    <span aria-hidden="true">&times;</span>
                </button>
            </h5>
        </div>
        <div class="card-body">
            <mat-dialog-content>
                <form *ngIf="view == 'create' || view == 'update'" [formGroup]="formCreate">

                    <div class="row">
                        <div class="col-md-4">
                            <mat-form-field class="example-full-width">
                                <mat-label>Nombre de la capacitación</mat-label>
                                <input matInput formControlName="mee_name">
                            </mat-form-field>
                        </div>
                        <div class="col-md-4">
                            <mat-form-field class="example-full-width">
                                <mat-label>Fecha de inicio:</mat-label>
                                <input matInput formControlName="mee_fec_ini" type="date">
                            </mat-form-field>
                        </div>
                        <div class="col-md-4">
                            <mat-form-field class="example-full-width">
                                <mat-label>Fecha Fin:</mat-label>
                                <input matInput formControlName="mee_fec_fin" type="date">
                            </mat-form-field>
                        </div>
                    </div>
                    <div class="row">
                        <!-- <div class="col-md-4">
                            <mat-form-field class="example-full-width">
                            <mat-label>Grupos:</mat-label>
                            <mat-select formControlName="receiver" (ngModelChange)="onSelectionChange($event)" multiple >
                                <mat-option *ngFor="let idet of group" [value]="idet.ls_codvalue">
                                  {{idet.description}}
                                </mat-option>
                              </mat-select>
                            </mat-form-field>
                        </div> -->
                        <div class="col-md-4">
                            <mat-form-field class="example-full-width">
                            <mat-label>Linea de Negocio:</mat-label>
                            <mat-select formControlName="receiver" (ngModelChange)="onSelectArea($event)" multiple>
                                <mat-option *ngFor="let idet of businessLine" [value]="idet.ls_codvalue">
                                  {{idet.description}}
                                </mat-option>
                              </mat-select>
                            </mat-form-field>
                        </div>
                       
                        <div class="col-md-4" *ngIf="checkArea">
                            <mat-form-field class="example-full-width">
                            <mat-label>Area:</mat-label>
                            <mat-select formControlName="receiver2" (ngModelChange)="onSelectCargo($event)" multiple>
                                <mat-option *ngFor="let idet of area" [value]="idet.idArea">
                                  {{idet.Areas}}
                                </mat-option>
                              </mat-select>
                            </mat-form-field>
                        </div>
                        <div class="col-md-4" *ngIf="checkCargo">
                            <mat-form-field class="example-full-width">
                            <mat-label>Cargo:</mat-label>
                            <mat-select formControlName="receiver3" (ngModelChange)="onSelectPerson($event)" multiple>
                                <mat-option *ngFor="let idet of cargo" [value]="idet.idPosition">
                                  {{idet.cargos}}
                                </mat-option>
                              </mat-select>
                            </mat-form-field>
                        </div>
                     
                          <div class="col-md-4" *ngIf="checkPerson">
                            <mat-form-field class="example-full-width">
                              <mat-label>Nombre completo del trabajador</mat-label>
                              <mat-select formControlName="receiver5"  (ngModelChange)="onSelectUser($event)" multiple>
                                <mat-option *ngFor="let idet of personInfoLine" [value]="idet.idPersonale" >
                                  {{idet.name}}
                                </mat-option>
                              </mat-select>
                            </mat-form-field>
                          </div>
                         
                    </div>
                    <div class="row mt-3">
                        <div class="col-md-4">
                          <label>Adjuntar Documento de Soporte:</label>
                          <input formControlName="file_sp" class="form-control" type="file" (change)="seleccionarArchivo($event)"
                            multiple>
                        </div>
                        <div class="col-md-4" *ngIf="view == 'update'">
                          <dt>Documentos de Soporte:</dt>
                          <dd>
                            <ul>
                              <li *ngFor="let archivo of selection.file_sp; let i = index;">
                                <a href="{{archivo}}" target="_blank">Download {{i+1}}</a>
                              </li>
                            </ul>
                          </dd>
                        </div>

                      </div>
                      <div class="row mt-3">
                        <div class="col-md-12">
                          <mat-form-field class="example-full-width">
                            <mat-label> Descripción de capacitación </mat-label>
                            <textarea matInput formControlName="mee_desc"></textarea>
                          </mat-form-field>
                        </div>
                      </div>
                </form>
            </mat-dialog-content>
            <div mat-dialog-actions>
                <div class="text-center col-12">
                    <button *ngIf="view == 'update'" mat-button class="btn btn-success"
                        (click)="onSubmitUpdate()">Actualizar</button>

                    <button *ngIf="view == 'create'" mat-button class="btn btn-success"
                        (click)="onSubmi()">Guardar</button>

                    <button mat-button class="btn btn-danger" (click)="closeDialog()">Cancelar</button>
                </div>
            </div>
        </div>
    </div>

    <div *ngIf="view == 'view'">
      <div class="modal-header">
          <h5 class="modal-title">{{title}}</h5>
          <button type="button" class="btn btn-primary btn-close" (click)="closeDialog()" aria-label="Close">
              <span aria-hidden="true">&times;</span>
          </button>
      </div>
      <mat-dialog-content style="min-width: 1200px;">
          <div class="row mt-2">
            
              <!-- <div class="col-md-12">
                <dt class="textHeader">{{meeting.mee_name}}</dt>
                <dd>
                  <ul>
                    <ng-container *ngFor="let archivo of selection.file_sp; let i = index;">
                      <ng-container *ngIf="esImagen(archivo)">
                        <li>
                          <img [src]="archivo"  alt="Imagen{{i+1}}" />
                        </li>
                      </ng-container>
                    </ng-container>
                    <ng-container>
                      <dd class="textCenter mt-3">{{meeting.mee_desc}}</dd>
                    </ng-container>
                    <ng-container>
                      <ul  class="textCenter">
                        <li *ngFor="let archivo of selection.file_sp; let i = index;">
                          <a href="{{archivo}}" target="_blank">Download {{i+1}}</a>
                        </li>
                      </ul>
                    </ng-container>
                    
                  </ul>
                </dd>
              </div> -->
              <div class="col-md-6">
               
                <dd>
                  <ul>
                    <ng-container *ngFor="let archivo of selection.file_sp; let i = index;">
                      <ng-container *ngIf="esImagen(archivo)">
                        <li>
                          <img [src]="archivo"  alt="Imagen{{i+1}}" />
                        </li>
                      </ng-container>
                    </ng-container>
                   
                    
                  </ul>
                </dd>
              </div>
              <div class="col-md-6">
                <dt class="textHeader">{{meeting.mee_name}}</dt>
                <ng-container>
                  <dd class="textCenter mt-3">{{meeting.mee_desc}}</dd>
                </ng-container>
                <ng-container>
                  <ul  class="textCenter">
                    <li *ngFor="let archivo of selection.file_sp; let i = index;">
                      <a href="{{archivo}}" target="_blank">Download {{i+1}}</a>
                    </li>
                  </ul>
                </ng-container>
              </div>
              
          </div>
      </mat-dialog-content>
  </div>